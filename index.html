<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>the Wren nest</title>
  <meta name="description" content="a place to run wren code">
  <meta name="author" content="Paul VanKeuren">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
  <link href='http://fonts.googleapis.com/css?family=Sanchez|Source+Code+Pro' rel='stylesheet' type='text/css'>

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="css/style.css">


  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="images/favicon.png">

</head>
<body>

  <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <header>
    <div class="container">
      Wren Nest
    </div>
  </header>
  <div class="container">
    <div class="row">

      <div class="ten columns" id="editor-parent">

        <div id="editor">IO.print("Hello, world!")

class Wren {
  flyTo(city) {
    IO.print("Flying to ", city)
  }
}

var adjectives = new Fiber {
  ["small", "clean", "fast"].each {|word| Fiber.yield(word) }
}

while (!adjectives.isDone) IO.print(adjectives.call())</div>

      <div id="console"></div>

      </div>

      <div class="two columns" id="toolbar">
        <button id="run">run</button>
      </div>

    </div>
  </div>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->

  <script src="js/ace.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/wren.js" type="text/javascript" charset="utf-8"></script>
  <script>
      // I'm a dart developer, not a JavaScript developer. :/

      var editor = ace.edit("editor");
      editor.setTheme("ace/theme/katzenmilch");
      editor.getSession().setMode("ace/mode/dart");

      var aceConsole = ace.edit("console");
      aceConsole.setTheme("ace/theme/katzenmilch");
      aceConsole.setReadOnly(true);
      aceConsole.setShowPrintMargin(false);
      aceConsole.setHighlightActiveLine(false);
      aceConsole.renderer.setShowGutter(false);

      var console = {};
      console.log = function(text) {
        aceConsole.setValue( aceConsole.getValue() + '' + text + '\n');
        aceConsole.clearSelection();
      }

      document.querySelector('#run').onclick = function() {
        newVM();
        aceConsole.setValue('');
        interpret("wren-nest", editor.getValue());
        freeVM();
      }
  </script>
</body>
</html>
